I"ã<h3 id="coroutine-jobs-in-kotlin-"><strong>Coroutine Jobs in Kotlin ?</strong><br /></h3>

<p><strong>ì°¸ê³ </strong>:<a href="https://www.youtube.com/watch?v=67bdklHmXA8">https://www.youtube.com/watch?v=67bdklHmXA8</a><br /></p>

<p>MVVM(Model View View Model)<br /></p>

<p>Why Design Pattern?<br /></p>

<p>(1) Makes the code more understandable.<br />
(2) Makes the code maintainable for long run.<br />
(3) Makes the project loosely coupled.<br />
(4) Makes the code testable.<br />
(5) Making changes, adding new features are easy.<br />
<strong>Design Patterì— ë”°ë¼ì„œ ì•±ì„ ë§Œë“¤ë©´, ë‚˜ì¤‘ì— ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì•±ì„ íŒŒì•…í•˜ëŠ”ë° ë§¤ìš° ë„ì›€ì´ ë˜ê³ , ë” ë‚˜ì•„ê°€ ì½”ë“œë¥¼ ìš´ìš©ë³´ìˆ˜í•˜ëŠ”ë°ë„ ë„ì›€ì´ ëœë‹¤. </strong><br />
<strong>ë˜í•œ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³ , ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.</strong><br /></p>

<p><strong><font color="Red">Architectural Principles</font></strong><br /></p>

<p>(1) Separation of Concerns<br /></p>

<p>(2) Drive UI from Model <br /></p>

<p>Why MVVM?<br />
(1) MVC <br />
(2) MVP <br />
(3) MVVM (Google recommend) <br /></p>

<p>ê¸°ì¡´ì— ì‚´í´ë³´ì•˜ë˜ MVVM Design Patternì˜ êµ¬ì¡°ë¥¼ ë‹¤ì‹œ ë˜ì§šì–´ë³´ë©´,<br />
(1) UIë¥¼ ë‹´ë‹¹í•˜ëŠ” Activity/Fragment<br />
(2) Life cycleì„ ë‹´ë‹¹í•˜ëŠ” ViewModel [LiveData] <br />
(3) ViewModelì—ì„œ ë°ì´í„°ë¥¼ ì·¨ë“í•˜ëŠ” ê²½ë¡œ â€œRepositoryâ€<br />
(4) â€œRepositoryâ€ì— ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” <strong>â€œRoom - SQLiteâ€ Local database(=Model)</strong>, ì›ê²© ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” <strong>â€œRemote Data Sourceâ€ - â€œRetrofit - WebServiceâ€</strong><br /></p>

<p>ìœ„ì˜ êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ìˆëŠ” ê²ƒì„ ë°°ì› ë‹¤. ì•±ì€ ê¸°ë³¸ì ìœ¼ë¡œ <strong>Model(Local storage)</strong>ë¥¼ í†µí•´ ìš°ì„ ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì·¨ë“í•œë‹¤.<br />
ë”°ë¼ì„œ, ì¸í„°ë„· ì—°ê²°ì— ë¬¸ì œê°€ ìƒê²¨ë„ ì•±ì˜ ì‚¬ìš©ì— ìˆì–´ì„œëŠ” ë¬¸ì œê°€ ì—†ê²Œ ëœë‹¤.<br /></p>

<p>ì´ì œ Kotlinìœ¼ë¡œ Room Databaseë¥¼ í¬í•¨í•œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ë³´ì.<br /></p>

<p><strong>App levelì˜ gradleì— ì•„ë˜ì˜ dependenciesë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</strong><br />
ìƒë‹¨ì—ëŠ” ì•„ë˜ì˜ apply plugin: ì„ ì„ ì–¸í•´ì£¼ê³ ,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//kotlin kapt and navigation safeargs plugin
apply plugin: 'kotlin-kapt'
apply plugin: "androidx.navigation.safeargs"
</code></pre></div></div>

<p>android{} ì•ˆì— buildTypesì˜ ì•„ë˜ì— ì¶”ê°€í•´ì¤€ë‹¤. (dataBinding compiler ì¶”ê°€)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dataBinding{
    enabled = true
}
</code></pre></div></div>

<p>(1) Retrofit and GSON<br />
(2) Kotlin Coroutines<br />
(3) ViewModel and LiveData<br />
(4) New Material design<br />
(5) Kodein Dependency Injection<br />
(6) Android Room<br />
(7) Android Navigation Architecture<br /></p>

<p><strong>Project levelì˜ gradleì— ì•„ë˜ì˜ class Pathë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</strong><br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//Android Navigation Safe Args Classpath
classpath "androidx.navigation:navigation-safe-args-gradle-plugin:2.2.0-alpha02"
</code></pre></div></div>

<p><strong>â€œgradle.propertiesâ€ì— ì•„ë˜ì˜ ë‚´ìš©ì„ ì¶”ê°€í•´ì¤€ë‹¤.</strong><br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>android.databinding.enableV2=true
</code></pre></div></div>

<p><strong><font color="Red">â€» Project package êµ¬ì„±</font></strong><br /></p>

<table>
  <tr>
    <td><strong><font color="Blue">Package(level-1)</font></strong></td>
    <td><strong><font color="Blue">Package(level-2)</font></strong></td>
    <td><strong><font color="Blue">Package(level-3)</font></strong></td>
  </tr>
  <tr>
    <td>â‘  data<br /></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>â‘¡ ui <br /></td>
    <td>auth</td>
    <td>(I) AuthListener.kt <br />
        (C) AuthViewModel.kt<br />
        (C) LoginActivity.kt<br />
        (C) SignupActivity.kt<br />
    </td>
  </tr>
  <tr>
    <td></td>
    <td>home</td>
    <td></td>
  </tr>
  <tr>
    <td>â‘¢ util <br /></td>
    <td>
       â†’ ViewUtils.kt <br />
      (1) Context. í™•ì¥í•¨ìˆ˜ í˜•íƒœë¡œ toast ë©”ì‹œì§€ë¥¼ ë„ìš°ëŠ” ë©”ì†Œë“œë¥¼ ì‘ì„±<br />
    </td>
    <td></td>
  </tr>
</table>

<p>ìœ„ì˜ ë„í‘œì™€ ê°™ì€ êµ¬ì¡°ë¡œ íŒ¨í‚¤ì§€ë¥¼ êµ¬ì„±í•˜ì˜€ë‹¤. <br /></p>

<p><img src="/images/android/2020-04-19/2020-04-19 data binding note(1).png" alt="blog capture" width="500" title="capture img" /><br /></p>

<p>ë‹¤ìŒìœ¼ë¡œ í•  ì‘ì—…ì€ ë¡œê·¸ì¸ í˜ì´ì§€ ì²˜ë¦¬ë¶€ë¶„ì„ êµ¬í˜„í•  ê²ƒì´ë‹¤.<br />
Loginí• ë•Œ UI(Activity/Fragment)ìƒì—ì„œ IDì™€ Passwordë¥¼ ì…ë ¥í•˜ê³ , ì…ë ¥í•œ ë°ì´í„°ê°€ ViewModel, Repository, Remote Data Source ìˆœìœ¼ë¡œ ì´ë™í•´ê°€ë©´ì„œ Validation ì²´í¬ë¥¼ í•˜ê²Œ ëœë‹¤.<br /></p>

<p>ì´ë•Œ Loginí• ë•Œ ì…ë ¥í–ˆë˜ ë°ì´í„°(ID, Password)ëŠ” editTextì— ì…ë ¥í•œ ê°’ì„ getter ë©”ì†Œë“œë¡œ ì·¨ë“í•´ì„œ ì²˜ë¦¬í•˜ì§€ ì•Šê³ , <strong><font color="Red">"Data bindingì²˜ë¦¬"</font></strong>ë¥¼ í•´ì„œ ì²˜ë¦¬ë¥¼ í•´ì¤„ ê²ƒì´ë‹¤. <br /></p>

<p>ë…¸íŠ¸í•„ê¸° ìº¡ì³ì˜ í•˜ë‹¨ë¶€ì— ì‘ì„±í•œ Data bindingí•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ì‹œ í•œ ë²ˆ ì •ë¦¬í•´ë³¸ë‹¤.<br />
<strong><font color="Blue">â€» Data bindingí•˜ëŠ” ë°©ë²•</font></strong><br />
(1) ê¸°ì¡´ì˜ layout íŒŒì¼ì—ì„œ Top-level tagë¥¼ ê°ì‹¸ëŠ” <layout></layout> íƒœê·¸ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.<br />
    (ë§Œë“¤ì–´ì¤€ layoutíƒœê·¸ì— <strong>xmlns:~</strong>ë¡œ ì‹œì‘í•˜ëŠ” tagë¥¼ <layout> ì•ˆì— ë¶™ì—¬ë„£ëŠ”ë‹¤)<br />
(2) ì´ì œ ì‹¤ì œ bindingí•´ì¤„ <data> íƒœê·¸ë¥¼ <layout>ê³¼ &lt;androidx.~&gt;(ì‹¤ì œ UI êµ¬ì„± ì½”ë“œ) ì‚¬ì´ì— ì‘ì„±í•´ì¤€ë‹¤. data tagëŠ” ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¡œ ì‘ì„±í•´ì¤€ë‹¤. <br /></layout></data></layout></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;data&gt;
    &lt;variable name="viewmodel"
              type="(viewModel classì˜ fullê²½ë¡œ)"/&gt;
&lt;/data&gt;
</code></pre></div></div>

<p>(3) UI êµ¬ì„±ì½”ë“œì— ìˆëŠ” editText(email, Password)ì˜ text ì†ì„±ì— <strong>â€@={viewmodel.email}â€</strong> ì™€ ê°™ì€ í˜•íƒœë¡œ ì‘ì„±í•´ì¤€ë‹¤. <strong>onclick ì†ì„±ì˜ ê²½ìš°ì—ëŠ” â€œ@{viewmodel:onLoginButtonClick}â€ê³¼ ê°™ì€ í˜•íƒœë¡œ ì‘ì„±í•´ì¤€ë‹¤.</strong> <br /></p>

<p><img src="/images/android/2020-04-19/2020-04-19 data binding note(2).png" alt="blog capture" width="500" title="capture img" /><br /></p>

<p>ì´ì œëŠ” AuthViewModel í´ë˜ìŠ¤ì™€ LoginActivityì˜ ê´€ê³„ ì„±ë¦½ì„ ìœ„í•´ <strong><font color="Red">AuthListener ì¸í„°í˜ì´ìŠ¤</font>ë¥¼ ì‘ì„±í•œë‹¤.</strong><br />
AuthListener ì¸í„°í˜ì´ìŠ¤ì—ëŠ” â€œì„±ê³µ, ì‹¤íŒ¨, ì‹œì‘â€í–ˆì„ë•Œ Toast ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ë©”ì†Œë“œë¥¼ ì‘ì„±í•´ì¤€ë‹¤.<br /></p>

<p>LoginActivityì—ëŠ” AuthListenerë¥¼ êµ¬í˜„í•´ì„œ override ë©”ì†Œë“œë¥¼ êµ¬í˜„í•œë‹¤.<br />
ì´ì œ Activity í´ë˜ìŠ¤ì™€ AuthViewModel í´ë˜ìŠ¤ë¥¼ bindingí•´ì¤„ ê²ƒì´ë‹¤.<br />
onCreate()ë©”ì†Œë“œì—ì„œ <br />
    // bindingì˜ íƒ€ì…ì€ ë ˆì´ì•„ì›ƒì˜ ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ layout name conversionì´ ì¼ì–´ë‚œë‹¤.
    val binding: ActivityLoginBinding = DataBindingUtil.setContentView(this, R.layout.activity_Login)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>val viewModel = ViewModelProviders.of(this).get(AuthViewModel::class.java)

binding.viewmodel = viewModel
viewModel.authListener = this
// LoginActivityì—ì„œ êµ¬í˜„ì„ í•´ì¤¬ê¸° ë•Œë¬¸ì— "this" í•´ì£¼ë©´ ëœë‹¤.&lt;br&gt;
</code></pre></div></div>

<h3 id="ì „ì²´ì ì¸-í•™ìŠµë‚´ìš©ì„-ë³µìŠµí•œë‹¤">ì „ì²´ì ì¸ í•™ìŠµë‚´ìš©ì„ ë³µìŠµí•œë‹¤.<br /></h3>
<p>1.</p>
:ET