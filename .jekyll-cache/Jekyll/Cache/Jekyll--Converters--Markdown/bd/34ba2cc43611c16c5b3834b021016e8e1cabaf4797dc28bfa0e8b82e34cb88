I"í$<blockquote>
  <p>MVVM way to structure code<br />
<strong>MVVM(Model View View-Model)</strong>ì€ ë‚´ê°€ ê°€ì¥ ì„ í˜¸í•˜ëŠ” architectural design patternì´ë‹¤.</p>
</blockquote>

<blockquote>
  <p><strong>Features of MVVM architectural design pattern</strong></p>
  <blockquote>
    <ol>
      <li>UI components are kept away from the business logic<br />
(í™”ë©´ì˜ ê°ê° UIìš”ì†Œê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë–¨ì–´ì ¸ ìˆë‹¤.)</li>
      <li>Business logic is kept away from the database operations<br />
(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ê³³ìœ¼ë¡œë¶€í„° ë–¨ì–´ì ¸ìˆë‹¤.)</li>
      <li>Easy to understand and read<br />
(ì´í•´í•˜ê¸° ì‰½ê³  ê°€ë…ì„±ì´ ë†’ë‹¤.)</li>
      <li>A lot less to worry when it comes to managing life cycle events <br />
(ë¼ì´í”„ ì‚¬ì´í´ ì´ë²¤íŠ¸ ê´€ë¦¬ì— ê´€í•œ í•œ í¬ê²Œ ê±±ì •í•  í•„ìš”ê°€ ì—†ë‹¤.)</li>
    </ol>
  </blockquote>
</blockquote>

<blockquote>
  <p><strong>Benefits of using MVVM</strong></p>
  <blockquote>
    <ol>
      <li>Life cycle state of the app will be maintained<br />
(ì•±ì˜ ë¼ì´í”„ ì‚¬ì´í´ ìƒíƒœë¥¼ ìœ ì§€í•œë‹¤.)</li>
      <li>The app will be in the same position the same exact state as when the user left it<br />
(ì•±ì€ ì‚¬ìš©ìê°€ ì•±ìœ¼ë¡œ ë¶€í„° ë‚˜ê°”ì„ë•Œ, ë˜‘ê°™ì€, ì •í™•í•œ ìœ„ì¹˜ì— ìœ„ì¹˜í•˜ê²Œ ëœë‹¤.)</li>
    </ol>
  </blockquote>
</blockquote>

<p><strong>Architecture Diagram - outlining an ideal situation when using MVVM</strong></p>
<table>
  <tr>
    <td width="50%">
      <img src="/images/android/MVVM architecture diagram.png" alt="blog capture" title="capture img" />
    </td>  
    <td width="50%">  
      <b>â€» Repository (Dataì˜ Hubì™€ ê°™ì€ ì—­í• )</b><br />  
      <b>â‘ </b> ìš°ì„ ì ìœ¼ë¡œ ì‚´í´ë³¼ ë¶€ë¶„ì€ <font color="Red"><b>Remote Data Sourceë¶€ë¶„</b></font>ì´ë‹¤. Retrofit APIì™€ ê°™ì€ í†µì‹ APIë¥¼ ì´ìš©í•´ì„œ ì›ê²©ì§€ì˜ ë°ì´í„°ë¥¼ ì·¨ë“í•˜ì—¬ ì‚¬ìš©í•œë‹¤.<br />
      (Remote data source which is being retrieved by Retrofit library)<br />   
      <br />  
      <b>â‘¡</b> ë‹¤ìŒìœ¼ë¡œ ì‚´í´ë³¼ ë¶€ë¶„ì€ <font color="Red"><b>Modelë¶€ë¶„</b></font>ìœ¼ë¡œ, Room SQLite databaseë¥¼ ê°€ì§€ê³  ìˆê³ , ì´ ë¶€ë¶„ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ Cacheëœ ë°ì´í„°ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.<br />
      (Room SQLite database which is acting as a database cache)<br />
      <br />
      <b>â€» ViewModel (Model for a View)</b><br />
      <b>â‘¢</b> ë‹¤ìŒìœ¼ë¡œ ì‚´í´ë³¼ ê³³ì€ <font color="Red"><b>ViewModelë¶€ë¶„</b></font>ì´ë‹¤. ì´ ë¶€ë¶„ì€ Business logicì„ ê°€ì§€ê³  ìˆëŠ” ë¶€ë¶„ì´ë‹¤. í™”ë©´ì— ë³´ì—¬ì§ˆ ë°ì´í„°ë¥¼ í•„í„°í•˜ëŠ” ì¡°ê±´ì²˜ë¦¬(if-else)ë“±ì„ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Custom RecyclerViewë¥¼ ì‚´í´ë³´ë©´, ê°ê°ì˜ ë¦¬ìŠ¤íŠ¸ ìš”ì†Œì—ëŠ” ì´ë¯¸ì§€ì™€ íƒ€ì´í‹€ ë‘ê°€ì§€ ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ë°, ì´ì™€ ê°™ì€ Viewë¥¼ ìœ„í•œ Modelì„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.<br />
    </td>
  </tr>
</table>
<p><strong>(Example)Project folder structure</strong><br />
(Package)</p>

<p>â‘  viewmodels :</p>
<blockquote>
  <p><strong>[ViewModel class ì‘ì„±ë²•]</strong>
<br />  <br />
â‘  ì¼ë°˜ì ìœ¼ë¡œ modelsì˜ Objectì˜ ì´ë¦„ì„ ì´ìš©í•´ì„œ [Object name]+ViewModelë¡œ í•˜ê¸°ë„ í•˜ì§€ë§Œ, <strong>ì–´ë–¤ Activityì—ì„œ ì‚¬ìš©ë˜ëŠ” ViewModelì¸ê°€ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œ [Activity name]+ViewModelë¡œ classëª…ì„ ì§€ì •í•˜ê¸°ë„ í•œë‹¤.</strong> <br />
â‘¡ í•´ë‹¹ ViewModelí´ë˜ìŠ¤ëŠ”ã€€ViewModelí´ë˜ìŠ¤ë¥¼ ìƒì†í•œë‹¤.
â‘¢ ViewModelí´ë˜ìŠ¤ ì•ˆì—ëŠ” MutableLiveData&lt;List<T>&gt; íƒ€ì…ì˜ ë³€ìˆ˜ì™€ LiveData&lt;List<T>&gt; ë‘ ê°€ì§€ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•œë‹¤. ì´ ë‘ ë³€ìˆ˜ íƒ€ì…ì˜ í´ë˜ìŠ¤ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ë©´  
<strong>MutableLiveData (mutable data / It can be changed - setter methodì‚¬ìš© ê°€ëŠ¥)</strong>ê³¼ <strong>LiveData (immutable data / It can't be changed - setter methodì‚¬ìš© ë¶ˆê°€ëŠ¥)</strong>ê°€ ìˆë‹¤.<br />        
â‘£ MutableLiveDataí´ë˜ìŠ¤ëŠ” LiveDataí´ë˜ìŠ¤ì˜ sub classì´ë‹¤. ì‘ì„±ëœ ì½”ë“œë¥¼ ë³´ë©´, MutableLiveDataë¥¼ ì·¨ë“í•˜ëŠ” Getterí•¨ìˆ˜ë¥¼ ë³´ë©´, LiveData&lt;List<T>&gt;íƒ€ì…ìœ¼ë¡œ ë³€ìˆ˜ë¥¼ ë°˜í™˜í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.<br />
<img src="/images/android/mutableLiveData class ref.png" alt="blog capture" title="capture img" width="300" />  <br />
â‘¤ MainActivityì—ì„œ <strong>ì‘ì„±í•œ ViewModelí´ë˜ìŠ¤ë¥¼ íƒ€ì…ìœ¼ë¡œ ê°–ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸</strong>í•˜ê³ , onCreate ë©”ì†Œë“œì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì´ˆê¸°í™”ë¥¼ ì‹œì¼œì¤€ë‹¤.<br />  
 ex) mMainActivityViewModel = ViewModelProviders.of(this).get(MainActivityViewModel.class);<br />
â‘¥ ì ì´ì œ <strong>ë°ì´í„°ê°€ ë³€í™”í•˜ëŠ” ê²ƒì„ ê´€ì°°í•˜ê¸° ìœ„í•œ ì„¤ì •</strong>ì„ í•œë‹¤.<br />
(Observe changes done to out viewModel or objects in our view model or in our live data objects) <br />
<img src="/images/android/ViewModel in MainActivity.png" alt="blog capture" title="capture img" width="700" />  <br />
â‘¦ configuration, ì˜ˆë¥¼ë“¤ì–´ screen rotation, lock í™”ë©´ìœ¼ë¡œ ê°”ë‹¤ê°€ ë‹¤ì‹œ ëŒì•„ì™”ì„ ê²½ìš°ì—ëŠ” í™”ë©´ì˜ ë°ì´í„°ê°€ ë°”ë€Œì§€ ì•Šê³ , Activityë‚˜ Fragmentê°€ ë°”ë€Œì—ˆì„ë•Œ, ë³€í™”ëœ ë°ì´í„°ë¥¼ í™”ë©´ì— ì ì ˆí•˜ê²Œ í‘œì‹œí•´ì£¼ê¸° ìœ„í•´ì„œ, overrideëœ onChanged ë©”ì†Œë“œì— mAdapter.notifyDataSetChanged();ë¥¼ ì‘ì„±í•´ì¤€ë‹¤. ì´ì™€ ë™ì‹œì— RecyclerViewë¥¼ ì´ˆê¸°í™” ì‹œì¼œì£¼ëŠ” ë©”ì†Œë“œ ì•ˆì—ì„œë„ RecyclerAdapterë¥¼ ì´ˆê¸°í™”ì‹œì¼œì¤„ë•Œ, ì•„ë˜ì™€ ê°™ì´ ViewModel classë¡œë¶€í„° ì·¨ë“í•œ ë°ì´í„°ë¡œ ì´ˆê¸°í™”ë¥¼ ì‹œì¼œì¤€ë‹¤. <br />
<strong>mAdapter = new RecyclerAdapter(this, mMainActivityViewModel.getNicePlaces().getValue());</strong></T></T></T></p>
</blockquote>

<p>â‘¡ repositories :</p>
<blockquote>
  <p><strong>[Repository class ì‘ì„±ë²•]</strong> <br />
<br />
â‘  classì˜ ëª…ëª…ê·œì¹™ì€ [Object name]+Repositoryë¡œ í•œë‹¤.<br />
â‘¡ ìš°ì„  ì „ì²´ì ì¸ í´ë˜ìŠ¤ ë‚´ë¶€ëŠ”  Singletonìœ¼ë¡œ ì‘ì„±ì„ í•œë‹¤.</p>
  <blockquote>
    <p>classì˜ ëŒ€í‘œ instance ë³€ìˆ˜ë¥¼ private staticìœ¼ë¡œ field variableë¡œ ì„ ì–¸ì„ í•´ì¤€ë‹¤.
ë°ì´í„°ë¥¼ ë‹´ì„ ArrayListí˜• dataSetë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ì¤€ë‹¤.
getInstance() methodë¥¼ ì„ ì–¸í•´ì¤€ë‹¤. instanceê°€ nullì¼ ê²½ìš°ì—ëŠ” instanceë¥¼ ì´ˆê¸°í™”ë¥¼ ì‹œì¼œì£¼ì¼œì£¼ê³  ë³€í™˜í•´ì¤€ë‹¤.<br />
ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ì „ì—, dataSetë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”ì‹œì¼œì¤„ setter methodë¥¼ ì„ ì–¸í•´ì¤€ë‹¤.<br />
í•´ë‹¹ Objectë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ MutableLiveData íƒ€ì…ì˜ getter methodë¥¼ ì„ ì–¸í•´ì¤€ë‹¤.<br /><br />
â€»ìœ„ì˜ ë‚´ìš©ì˜ ì˜ˆì‹œê°€ ë˜ëŠ” ì½”ë“œë¥¼ ì•„ë˜ì— ì²¨ë¶€í•˜ì˜€ë‹¤.<br />
<img src="/images/android/2020-04-07 Repository class.png" alt="blog capture" width="500" title="capture img" /><br />
<br /></p>
  </blockquote>
</blockquote>

<blockquote>
  <p>â‘ ï¼‹â‘¡ ViewModel + Repository : ì´ì œ ì‘ì„±í•œ Repositoryë¥¼ ì´ìš©í•´ì„œ ViewModelì˜ MutableLiveDataë¥¼ ì´ˆê¸°í™”ì‹œì¼œì£¼ëŠ” ì‘ì—…ì„ í•  ê²ƒì´ë‹¤. <br />
ë°ì´í„°ë¥¼ ì´ˆê¸°í™” ì‹œì¼œì£¼ê¸° ìœ„í•´ì„œëŠ” ìš°ì„  Singletonìœ¼ë¡œ ì„ ì–¸í•œ Repositoryì˜ getInstanceë¥¼ í†µí•´ Repositoryì˜ Instanceê°ì²´ë¥¼ ê°€ì ¸ì˜¤ê³ , ê·¸ ê°ì²´ë¥¼ í†µí•´ ë°ì´í„°Â»ë¥¼ ê°€ì ¸ì™€ì„œ ViewModelì˜ mutableLiveData íƒ€ì… ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”ì‹œì¼œì¤€ë‹¤.<br />
<img src="/images/android/2020-04-07 initialize ViewModel by using Repo class.png" alt="blog capture" width="500" title="capture img" /><br />
<br /></p>
</blockquote>

<blockquote>
  <p>ë§ˆì§€ë§‰ìœ¼ë¡œ ê¸°ì¡´ì— LiveDataì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ê¸° ìœ„í•´ Observeí•œ ë¶€ë¶„ì˜ ì´ì „ì— ViewModelì—ì„œì˜ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”ì‹œì¼œì£¼ëŠ” ì‘ì—…ì„ í•´ì•¼í•œë‹¤. (init() method ì„ ì–¸)<br />
<img src="/images/android/2020-04-07 ViewModel Init method.png" alt="blog capture" width="700" title="capture img" /><br /></p>
</blockquote>

<p>â‘¢ adapters</p>

<p>â‘£ models</p>

<p>â‘¤ í™”ë©´ì— Progress bar ë³´ì—¬ì£¼ê¸°</p>

<blockquote>
  <p>(ì‹¤ìŠµë‚´ìš©) í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ì— í‘œì‹œë˜ì–´ìˆëŠ” Floating buttonì„ í´ë¦­í•˜ë©´, ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€ê°€ ë˜ê³ , ë™ì‹œì— ì•½ 2ì´ˆê°„ Delayê°€ ë˜ë©´ì„œ Progress barê°€ í™”ë©´ì˜ ì¤‘ì•™ì— í‘œì‹œê°€ ëœë‹¤.<br />
<br />
â‘  ViewModel classì— MutableLiveData<Boolean> íƒ€ì…ìœ¼ë¡œ field variableë¥¼ ì„ ì–¸í•´ì£¼ê³  ì´ˆê¸°í™” ì‹œì¼œì¤€ë‹¤.<br />
â‘¡ addNewValue ë©”ì†Œë“œë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. ì•ì„œ â‘ ì—ì„œ ë§Œë“¤ì–´ ì¤€ ë³€ìˆ˜ë¥¼ flagë³€ìˆ˜ë¡œ ì´ìš©í•´ì„œ, trueë¡œ setValueë¥¼ í•´ì£¼ê³ , ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´ AsyncTask classë¥¼ ì´ìš©í•´ì„œ onPostExecute() ë©”ì†Œë“œì™€ doInBackground() ë©”ì†Œë“œë¥¼ Overrideí•´ì„œ ì‘ì„±ì„ í•´ì¤€ë‹¤. ì˜ˆì‹œ ì½”ë“œëŠ” ì•„ë˜ë¥¼ ì°¸ì¡°í•œë‹¤.<br />
<img src="/images/android/2020-04-07 Async Progress bar.png" alt="blog capture" width="600" title="capture img" /><br />
â‘¢ ì´ì œ MainActivityì—ì„œ ì•ì„œ ì„ ì–¸í•œ Boolean Live ë°ì´í„°ë¥¼ Observeí•´ì„œ ProgressBarí‘œì‹œë¥¼ í•˜ë„ë¡ ì„¤ì •í•œë‹¤.
<img src="/images/android/2020-04-07 MainActivity Progress bar .png" alt="blog capture" width="750" title="capture img" /> <br />
<strong>â€» ì‹¤ìŠµì„ í•˜ê²Œ ë˜ë©´ì„œ ì•Œê²Œ ëœ, ê³µë¶€ê°€ í•„ìš”í•˜ë‹¤ê³  ìƒê°ë˜ëŠ” ë¶€ë¶„ : <br /></strong>
â‘  AsyncTask classëŠ” Deprecated ë˜ì—ˆë‹¤. ë”°ë¼ì„œ standard java.util.concurrent ë˜ëŠ” Kotlin concurrency utilities insteadë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.<br />
[AsyncTask]
ì´ì „ì— í”„ë¡œì íŠ¸ë¥¼ í–ˆì„ë•Œ, Kotlin coroutines ì•„í‚¤í…ì³ ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ ì•Œì§€ ëª»í–ˆì—ˆëŠ”ë°, ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ Classì˜€ë‹¤. ì½”í‹€ë¦°ì„ ê³µë¶€í•˜ë©´ì„œ ì´ ë¶€ë¶„ë„ ê°™ì´ ê³µë¶€í•´ë³´ì.<br /></Boolean></p>
</blockquote>

<p><a href="https://developer.android.com/reference/android/os/AsyncTask">AsyncTask Ref</a>
<a href=""></a></p>
:ET